@page "/Games"
@inject IGamesHttpRepository _gamesHttpRepository


<h3>Games</h3>

<div class="d-flex justify-content-end mb-3">
    <button class="btn btn-primary">New Game</button>
</div>

<table class="table">
    <thead>
    <tr>
        <th>Id</th>
        <th>State</th>
        <th>Created At</th>
        <th>Finished At</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var game in _games)
    {
    <tr>
        <td>@game.Id</td>
        <td>@game.State</td>
        <td>@game.CreatedAt</td>
        <td>@game.FinishedAt</td>
        <td>
            @if (game.FinishedAt == null)
            {
            <button class="btn btn-success">Continue</button>
            }
        </td>
    </tr>
    }
    </tbody>
</table>

@code {
    List<GameResponse> _games = [];

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        _games = await _gamesHttpRepository.GetGames();
    }

}
